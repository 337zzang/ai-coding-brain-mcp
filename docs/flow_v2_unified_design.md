# Flow Project v2 완전 통합 설계
생성일: 2025-07-21
접근 방식: 레거시 제거 + 완전 통합

## 🎯 핵심 변경사항
- 어댑터 패턴 → 완전 통합
- WorkflowManager 제거
- FlowManagerUnified로 모든 기능 통합

## 📋 설계 원칙
1. **단일 책임**: 하나의 통합 매니저가 모든 워크플로우 관리
2. **후방 호환성**: 기존 명령어는 모두 지원
3. **데이터 보존**: 자동 마이그레이션
4. **확장성**: 새 기능 추가가 쉬운 구조

## 🏗️ 구현 계획

### Phase 1: FlowManagerUnified 생성 (30분)
- FlowManagerWithContext 상속
- process_command 메서드 구현
- 명령어 핸들러 등록

### Phase 2: 레거시 명령어 구현 (20분)
- /task, /status, /list 등
- 기존 동작과 동일하게 구현

### Phase 3: 마이그레이션 (10분)
- workflow.json → flow 구조
- 데이터 무손실 변환

### Phase 4: 통합 및 테스트 (20분)
- workflow_wrapper.py 수정
- 전체 기능 테스트
- 레거시 제거

## 📊 예상 결과
- 코드 라인 수: -200줄 (레거시 제거)
- 새 코드: +300줄 (통합 매니저)
- 순 증가: +100줄 (더 많은 기능 포함)

## ⚠️ 리스크
1. 초기 구현 복잡도 높음
2. 롤백 어려움
3. 철저한 테스트 필요

## ✅ 기대 효과
1. 깔끔한 코드베이스
2. 일관된 명령어 체계
3. 쉬운 유지보수
4. 향후 확장 용이
