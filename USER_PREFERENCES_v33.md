"# 🧠 AI Coding Brain MCP 중심 개발 - User Preferences v33.0\n\n## 🎯 핵심 철학: \"확인하고 검증하라 - 추측하지 마라\"\nClaude Desktop + ai-coding-brain-mcp로 **안정적이고 검증된 개발**\n\n---\n\n## 🚀 AI Coding Brain MCP 핵심 도구\n\n### 1️⃣ **execute_code - 만능 실행 환경**\n```python\n# 🔥 이것 하나로 거의 모든 작업 가능!\nexecute_code(code=\"\"\"\n# 1. 먼저 사용 가능한 메서드 확인 (추측하지 말기!)\nprint(\"=== 사용 가능한 helpers 메서드 ===\")\nmethods = [m for m in dir(helpers) if not m.startswith('_')]\nprint(f\"총 {len(methods)}개 메서드\")\n\n# 2. 프로젝트 상태 확인 (검증된 메서드만 사용)\nproject_name = os.path.basename(os.getcwd())  # ✓ 올바른 방법\n# helpers.get_project_name()  # ✗ 존재하지 않는 메서드\n\n# 3. Git 상태 (helpers 메서드 사용)\nstatus = helpers.git_status()  # ✓ 플랫폼 독립적\nif status.ok:\n    print(f\"브랜치: {status.data.get('branch', 'unknown')}\")\n# subprocess.run(['git', 'status'])  # ✗ Windows에서 실패\n\n# 4. 파일 작업 (HelperResult 활용)\nresult = helpers.read_file('src/main.py')\nif result.is_success:  # 또는 result.ok\n    content = result.data\n    # 또는\n    content = result.unwrap()  # 실패 시 예외\n    content = result.unwrap_or('')  # 실패 시 기본값\n\"\"\")\n```\n\n#### ⚠️ **황금률: 추측하지 말고 확인하라**\n```python\n# ❌ 나쁜 예: 메서드 이름 추측\nhelpers.get_project_name()  # AttributeError!\nhelpers.workflow('/status')  # 잘못된 사용법!\n\n# ✅ 좋은 예: 먼저 확인\n# 1) 메서드 확인\nprint([m for m in dir(helpers) if 'project' in m])\nprint([m for m in dir(helpers) if 'workflow' in m])\n\n# 2) 올바른 사용\nhelpers.get_workflow_status()  # 정확한 메서드명\nhelpers.flow_project(\"project-name\")  # 정확한 사용법\n\n# 3) 반환값 구조 확인\nresult = helpers.some_method()\nprint(f\"타입: {type(result)}\")\nprint(f\"구조: {result}\")\n```\n\n### 2️⃣ **flow_project - 프로젝트 전환의 신**\n```python\n# 프로젝트 전환 + 전체 컨텍스트 로드\nflow_project(\"ai-coding-brain-mcp\")\n\n# 자동으로 수행되는 작업:\n# - 이전 프로젝트 백업\n# - Git 상태 확인\n# - 워크플로우 로드\n# - 파일 구조 분석\n# - 프로젝트 브리핑\n# - /docs 동기화\n```\n\n### 3️⃣ **새로운 Search 래퍼 함수들** ⭐ (v33 신규)\n```python\n# execute_code 내에서 강력한 검색 기능 사용\nexecute_code(\"\"\"\n# 코드 검색 (정규식 지원)\nresult = helpers.search_code('def.*async', '.', '*.py')\n\n# 클래스 찾기\nresult = helpers.find_class('HelperResult')\n\n# 함수 찾기\nresult = helpers.find_function('execute_code')\n\n# import 문 찾기\nresult = helpers.find_import('ai_helpers')\n\n# 결과 처리\nif result.is_success:\n    for match in result.data['results']:\n        print(f\"{match['file']}:{match.get('line', '?')}\")\n\"\"\")\n```\n\n---\n\n## 💎 HelperResult 마스터하기 (v33 강화)\n\n### 📊 HelperResult 이해하기\n```python\n# 모든 helpers 메서드는 HelperResult 반환\nresult = helpers.create_file(\"test.txt\", \"content\")\n\n# HelperResult 구조\n# {\n#   ok: bool,          # 성공 여부\n#   data: Any,         # 실제 데이터\n#   error: str | None  # 에러 메시지\n# }\n\n# 사용 가능한 속성/메서드\nresult.ok              # 성공 여부\nresult.is_success      # ok의 별칭\nresult.is_ok          # ok의 별칭\nresult.data           # 실제 데이터\nresult.error          # 에러 메시지\nresult.unwrap()       # data 반환 (실패시 예외)\nresult.unwrap_or(default)  # data 또는 기본값\nresult.map(func)      # 함수형 변환\nresult.and_then(func) # 체이닝\n```\n\n### 🎯 실전 패턴\n```python\n# 패턴 1: 안전한 처리\nresult = helpers.read_file(\"config.json\")\nconfig = result.unwrap_or({})  # 실패해도 빈 dict\n\n# 패턴 2: 명시적 에러 처리\nif result.is_success:\n    process(result.data)\nelse:\n    print(f\"에러: {result.error}\")\n\n# 패턴 3: 함수형 스타일\nhelpers.read_file(\"data.json\") \\\n    .map(json.loads) \\\n    .map(lambda x: x.get('users', [])) \\\n    .unwrap_or([])\n\n# 패턴 4: 체이닝\nresult.and_then(lambda data: helpers.create_file(\"backup.json\", data))\n```\n\n---\n\n## 🔧 자주 하는 실수와 해결책 (v33 신규)\n\n### 1. **메서드 이름 추측**\n```python\n# ❌ 실수\nhelpers.get_project_name()  # 존재하지 않음\nhelpers.workflow('/status') # 잘못된 사용법\n\n# ✅ 해결책\n# 1) 먼저 확인\nprint([m for m in dir(helpers) if 'name' in m.lower()])\n\n# 2) 대안 사용\nproject_name = os.path.basename(os.getcwd())\nworkflow_status = helpers.get_workflow_status()\n```\n\n### 2. **Git 명령 직접 실행 (Windows)**\n```python\n# ❌ 실수\nimport subprocess\nsubprocess.run(['git', 'status'])  # Windows에서 실패\n\n# ✅ 해결책\nstatus = helpers.git_status()  # 플랫폼 독립적\n```\n\n### 3. **반환값 구조 미확인**\n```python\n# ❌ 실수\ndirs = helpers.scan_directory_dict('.')\nfor d in dirs:  # TypeError!\n    print(d)\n\n# ✅ 해결책\nresult = helpers.scan_directory_dict('.')\nif result.ok:\n    dirs = result.data.get('directories', [])\n    for d in dirs:\n        print(d.get('name'))  # 안전한 접근\n```\n\n### 4. **datetime import 오류**\n```python\n# ❌ 실수\nimport datetime\ndatetime.fromtimestamp(...)  # AttributeError\n\n# ✅ 해결책\nfrom datetime import datetime\ndatetime.fromtimestamp(...)\n# 또는\nimport datetime\ndatetime.datetime.fromtimestamp(...)\n```\n\n---\n\n## 🌟 워크플로우 패턴 (v33 개선)\n\n### 패턴 1: \"탐색 → 확인 → 실행\"\n```python\n# 1단계: 사용 가능한 도구 탐색\nexecute_code(\"\"\"\n# 메서드 탐색\nprint(\"Git 관련:\", [m for m in dir(helpers) if 'git' in m])\nprint(\"File 관련:\", [m for m in dir(helpers) if 'file' in m])\n\"\"\")\n\n# 2단계: 반환값 구조 확인\nexecute_code(\"\"\"\nresult = helpers.git_status()\nprint(f\"타입: {type(result)}\")\nprint(f\"성공: {result.ok}\")\nif result.ok:\n    print(f\"데이터 구조: {result.data.keys()}\")\n\"\"\")\n\n# 3단계: 실제 사용\nexecute_code(\"\"\"\nif result.ok:\n    branch = result.data.get('branch', 'unknown')\n    modified = result.data.get('modified', [])\n    print(f\"브랜치: {branch}, 수정: {len(modified)}개\")\n\"\"\")\n```\n\n### 패턴 2: \"검색 → 분석 → 수정\"\n```python\n# 1단계: 대상 찾기\nexecute_code(\"\"\"\n# 수정할 함수 찾기\nresult = helpers.find_function('target_function')\nif result.is_success:\n    for match in result.data['results']:\n        print(f\"발견: {match['file']}:{match.get('line')}\")\n\"\"\")\n\n# 2단계: 내용 확인\nexecute_code(\"\"\"\n# 파일 읽기\ncontent = helpers.read_file(target_file).unwrap_or('')\n# 분석...\n\"\"\")\n\n# 3단계: AST 기반 안전한 수정\nexecute_code(\"\"\"\nimport ast\n# AST 파싱 및 수정\ntree = ast.parse(content)\n# ... 수정 로직 ...\nnew_code = ast.unparse(tree)\nhelpers.create_file(target_file, new_code)\n\"\"\")\n```\n\n---\n\n## 📋 체크리스트 (v33 업데이트)\n\n| 작업 | 필수 확인사항 |\n|------|--------------|\n| **메서드 호출 전** | `dir(helpers)`로 존재 여부 확인 |\n| **반환값 사용 전** | `type()`, `.ok` 확인 |\n| **파일 수정 전** | 백업 생성, AST 사용 고려 |\n| **Git 작업** | `helpers.git_*` 메서드 사용 |\n| **에러 발생시** | `result.error` 확인 |\n\n---\n\n## 🚫 안티패턴 (절대 하지 마세요!)\n\n```python\n# ❌ 메서드 이름 추측\nhelpers.probably_this_method()  \n\n# ❌ 에러 무시\nresult = helpers.some_method()\ndata = result.data  # result.ok 확인 없이\n\n# ❌ 플랫폼 종속적 코드\nsubprocess.run(['git', 'status'])  # Windows 실패\n\n# ❌ 문자열 직접 수정\ncontent += \"\\n\\ndef new_function():\"  # 들여쓰기 문제\n\n# ❌ 구조 가정\ndirs = result['directories']  # .data 없이 직접 접근\n```\n\n---\n\n## 🎯 핵심 원칙\n\n1. **\"추측하지 말고 확인하라\"** - 메서드 존재, 반환값 구조 항상 확인\n2. **\"HelperResult를 활용하라\"** - `.ok`, `.unwrap_or()` 등 활용\n3. **\"플랫폼 독립적으로\"** - helpers 메서드 우선 사용\n4. **\"AST로 안전하게\"** - 코드 수정시 AST 활용\n5. **\"에러를 무시하지 마라\"** - 모든 result의 ok 확인\n\n---\n\n## 📊 도구 우선순위 (v33 업데이트)\n\n| 우선순위 | 도구 | 용도 | 사용 빈도 |\n|---------|------|------|-----------|\n| 1️⃣ | `execute_code` | 모든 작업의 중심 | ⭐⭐⭐⭐⭐ |\n| 2️⃣ | `flow_project` | 프로젝트 전환 | ⭐⭐⭐⭐⭐ |\n| 3️⃣ | `helpers.*` | 검증된 메서드만 | ⭐⭐⭐⭐⭐ |\n| 4️⃣ | `search_*` | 코드 검색 | ⭐⭐⭐⭐ |\n| 5️⃣ | `project_knowledge_search` | 컨텍스트 확인 | ⭐⭐⭐⭐ |\n\n---\n\n## 💬 핵심 메시지\n\n> **\"추측은 버그의 어머니다. 항상 확인하고, 검증하고, 안전하게 처리하라!\"**\n\n- 🔍 존재 확인: `dir(helpers)`\n- 📊 구조 확인: `type()`, `print()`\n- ✅ 성공 확인: `result.ok`\n- 🛡️ 안전 처리: `unwrap_or()`\n- 🧪 검증 우선: 추측 < 테스트\n\n**검증된 코드로 안정적인 개발! 🧠⚡🛡️**\n\n---\n\n## 📜 버전 정보\n- v32.0 → **v33.0**: 실전 경험 반영, 안티패턴 추가, 검증 중심 개발\n- 주요 개선: 메서드 확인 강조, HelperResult 활용법, 플랫폼 독립성"