"\"\"\"\ní”„ë¡œì íŠ¸ ì´ˆê¸°í™” ì „ë‹´ ëª¨ë“ˆ\nìƒˆ í”„ë¡œì íŠ¸ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±ì„ ë‹¨ì¼ ì±…ì„ìœ¼ë¡œ ê´€ë¦¬\n\"\"\"\nfrom pathlib import Path\nfrom datetime import datetime\nimport subprocess\nimport json\nimport logging\nfrom typing import Dict, Any\n\nlogger = logging.getLogger(__name__)\n\n# í‘œì¤€ ë””ë ‰í† ë¦¬ êµ¬ì¡°\nSKELETON_DIRS = [\"src\", \"docs\", \"test\", \"memory\"]\n\ndef create_skeleton(root: Path, *, init_git: bool = True) -> Dict[str, Any]:\n    \"\"\"\n    ìƒˆ í”„ë¡œì íŠ¸ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„±\n\n    Args:\n        root: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\n        init_git: Git ì´ˆê¸°í™” ì—¬ë¶€\n\n    Returns:\n        ìƒì„± ê²°ê³¼ ì •ë³´ ë”•ì…”ë„ˆë¦¬\n    \"\"\"\n    try:\n        # 1. ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±\n        root.mkdir(parents=True, exist_ok=True)\n        for d in SKELETON_DIRS:\n            (root / d).mkdir(exist_ok=True)\n\n        # 2. ê¸°ë³¸ íŒŒì¼ë“¤ ìƒì„±\n        # README.md\n        readme_content = f\"\"\"# {root.name}\n\n## ğŸš€ í”„ë¡œì íŠ¸ ê°œìš”\n{root.name} í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.\n\n## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°\n```\n{root.name}/\nâ”œâ”€â”€ README.md          # í”„ë¡œì íŠ¸ ë¬¸ì„œ\nâ”œâ”€â”€ src/              # ì†ŒìŠ¤ ì½”ë“œ\nâ”œâ”€â”€ test/             # í…ŒìŠ¤íŠ¸ ì½”ë“œ\nâ”œâ”€â”€ docs/             # ë¬¸ì„œ\nâ””â”€â”€ memory/           # í”„ë¡œì íŠ¸ ë©”ëª¨ë¦¬/ì»¨í…ìŠ¤íŠ¸\n```\n\n## ğŸ› ï¸ ì‹œì‘í•˜ê¸°\ní”„ë¡œì íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ê°œë°œì„ ì‹œì‘í•˜ì„¸ìš”!\n\nìƒì„±ì¼: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\"\"\"\n        (root / \"README.md\").write_text(readme_content, encoding=\"utf-8\")\n\n        # docs/overview.md\n        docs_content = f\"\"\"# {root.name} í”„ë¡œì íŠ¸ ë¬¸ì„œ\n\n## í”„ë¡œì íŠ¸ ì„¤ëª…\nì´ ë¬¸ì„œëŠ” {root.name} í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ  ë¬¸ì„œì…ë‹ˆë‹¤.\n\n## ì£¼ìš” ê¸°ëŠ¥\n- [ ] ê¸°ëŠ¥ 1\n- [ ] ê¸°ëŠ¥ 2\n- [ ] ê¸°ëŠ¥ 3\n\n## ì•„í‚¤í…ì²˜\ní”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ì„¤ëª…ì„ ì—¬ê¸°ì— ì‘ì„±í•˜ì„¸ìš”.\n\"\"\"\n        (root / \"docs\" / \"overview.md\").write_text(docs_content, encoding=\"utf-8\")\n\n        # test/__init__.py\n        (root / \"test\" / \"__init__.py\").touch()\n\n        # test/test_smoke.py - ê¸°ë³¸ í…ŒìŠ¤íŠ¸\n        test_content = '''\"\"\"Smoke test for project initialization\"\"\"\n\ndef test_smoke():\n    \"\"\"í”„ë¡œì íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸\"\"\"\n    assert True, \"Basic smoke test passed\"\n\ndef test_project_structure():\n    \"\"\"í”„ë¡œì íŠ¸ êµ¬ì¡° í™•ì¸\"\"\"\n    import os\n    assert os.path.exists(\"README.md\")\n    assert os.path.exists(\"src\")\n    assert os.path.exists(\"test\")\n    assert os.path.exists(\"docs\")\n'''\n        (root / \"test\" / \"test_smoke.py\").write_text(test_content, encoding=\"utf-8\")\n\n        # src/__init__.py\n        (root / \"src\" / \"__init__.py\").touch()\n\n        # 3. Git ì´ˆê¸°í™” (ì„ íƒì )\n        git_initialized = False\n        if init_git and is_git_available():\n            try:\n                # Git ì´ˆê¸°í™”\n                subprocess.run([\"git\", \"init\"], cwd=root, check=True, capture_output=True)\n\n                # .gitignore ìƒì„±\n                write_gitignore(root)\n\n                # ì²« ì»¤ë°‹\n                subprocess.run([\"git\", \"add\", \".\"], cwd=root, check=True, capture_output=True)\n                subprocess.run(\n                    [\"git\", \"commit\", \"-m\", \"feat: initial project skeleton\"], \n                    cwd=root, \n                    check=True, \n                    capture_output=True\n                )\n                git_initialized = True\n                logger.info(f\"Git ì €ì¥ì†Œ ì´ˆê¸°í™” ì™„ë£Œ: {root}\")\n\n            except subprocess.CalledProcessError as e:\n                logger.warning(f\"Git ì´ˆê¸°í™” ì‹¤íŒ¨: {e}\")\n                git_initialized = False\n\n        # 4. ì´ˆê¸° ì»¨í…ìŠ¤íŠ¸ ìƒì„±\n        initial_context = {\n            \"project_name\": root.name,\n            \"project_path\": str(root),\n            \"created_at\": datetime.now().isoformat(),\n            \"last_updated\": datetime.now().isoformat(),\n            \"type\": \"new_project\",\n            \"status\": \"initialized\"\n        }\n\n        # memory ë””ë ‰í† ë¦¬ì— ì €ì¥\n        context_path = root / \"memory\" / \"context.json\"\n        context_path.write_text(\n            json.dumps(initial_context, indent=2, ensure_ascii=False),\n            encoding=\"utf-8\"\n        )\n\n        # 5. ê²°ê³¼ ë°˜í™˜\n        return {\n            \"success\": True,\n            \"project_name\": root.name,\n            \"path\": str(root),\n            \"git_initialized\": git_initialized,\n            \"created_dirs\": SKELETON_DIRS,\n            \"created_files\": [\n                \"README.md\", \n                \"docs/overview.md\", \n                \"test/__init__.py\", \n                \"test/test_smoke.py\", \n                \"src/__init__.py\",\n                \"memory/context.json\"\n            ]\n        }\n\n    except Exception as e:\n        logger.error(f\"í”„ë¡œì íŠ¸ ìŠ¤ì¼ˆë ˆí†¤ ìƒì„± ì‹¤íŒ¨: {e}\")\n        return {\n            \"success\": False,\n            \"error\": str(e)\n        }\n\ndef is_git_available() -> bool:\n    \"\"\"Git ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸\"\"\"\n    try:\n        from path_utils import is_git_available as _is_git_available\n        return _is_git_available()\n    except ImportError:\n        # ëŒ€ì²´ êµ¬í˜„\n        try:\n            subprocess.run([\"git\", \"--version\"], capture_output=True, check=True)\n            return True\n        except (FileNotFoundError, subprocess.CalledProcessError):\n            return False\n\ndef write_gitignore(root: Path):\n    \"\"\"í‘œì¤€ .gitignore íŒŒì¼ ìƒì„±\"\"\"\n    try:\n        from path_utils import write_gitignore as _write_gitignore\n        _write_gitignore(root)\n    except ImportError:\n        # ëŒ€ì²´ êµ¬í˜„\n        gitignore_content = \"\"\"# Python\n__pycache__/\n*.py[cod]\n*$py.class\n*.so\n.Python\nenv/\nvenv/\n.venv/\n\n# IDE\n.vscode/\n.idea/\n*.swp\n*.swo\n\n# OS\n.DS_Store\nThumbs.db\n\n# Project specific\nmemory/cache/\n*.log\n.env\n\"\"\"\n        (root / \".gitignore\").write_text(gitignore_content, encoding=\"utf-8\")\n"