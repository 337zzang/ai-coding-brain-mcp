"# flow_project 문제 모듈 최종 정리\n\n## 🔴 핵심 문제 발견!\n\n### 1. 가장 중요한 문제: _safe_project_check 함수\n- **파일**: `python/enhanced_flow.py`\n- **문제**: 함수에 **return 문이 없음**\n- **결과**: 함수가 None을 반환 → NoneType 에러 발생\n- **위치**: Line 480에서 시작하는 함수\n\n### 2. 에러 발생 흐름\n1. `flow_project()` 호출\n2. `cmd_flow_with_context()` 실행\n3. Line 276: `safety_check = _safe_project_check(project_name)`\n4. `_safe_project_check()`가 None 반환 (return 문 누락)\n5. Line 296: `safety_check[\"checks\"]` 접근 시도\n6. **NoneType 에러 발생!**\n\n---\n\n## 📁 문제가 있는 모듈들\n\n### 1. python/enhanced_flow.py\n- **_safe_project_check()**: return result 누락 ⚠️\n- **cmd_flow_with_context()**: None 체크 없이 dictionary 접근\n\n### 2. python/ai_helpers/git.py  \n- **git_status()**: 실패 시 'unknown' 문자열만 반환\n- subprocess 미사용으로 Git 명령 실행 문제\n\n### 3. python/ai_helpers/__init__.py\n- **flow_project()**: 프록시 패턴 파라미터 전달 문제\n\n---\n\n## 🔧 즉시 수정 필요\n\n### 1. 가장 긴급 - _safe_project_check 함수 수정\n```python\ndef _safe_project_check(project_name: str) -> Dict[str, Any]:\n    # ... 기존 코드 ...\n\n    # 마지막에 반드시 추가:\n    return result  # ← 이것이 누락됨!\n```\n\n### 2. 안전성 향상 - cmd_flow_with_context 수정\n```python\n# Line 296 근처\nif safety_check and \"checks\" in safety_check:\n    git_info = safety_check[\"checks\"].get(\"git\", {})\nelse:\n    git_info = {}\n    logger.warning(\"safety_check가 None입니다\")\n```\n\n---\n\n## 🎯 문제 해결 우선순위\n1. **즉시**: enhanced_flow.py의 _safe_project_check에 return문 추가\n2. **높음**: None 체크 로직 추가\n3. **중간**: Git 헬퍼 개선\n4. **낮음**: 프록시 패턴 개선\n"