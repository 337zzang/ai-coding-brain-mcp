
## ğŸ“ v30.1 ì£¼ìš” ë³€ê²½ì‚¬í•­ (ì¶”ê°€ ì˜ˆì •)

### 1. **/flow ëª…ë ¹ì–´ ê°œì„  êµ¬í˜„ ì™„ë£Œ**
   - `/flow [í”„ë¡œì íŠ¸ëª…]` ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ Plan ëª©ë¡ í‘œì‹œ
   - Plan ì™„ë£Œ ìƒíƒœ ì•„ì´ì½˜ í‘œì‹œ (âœ…/â³/ğŸ”„)
   - Task ì§„í–‰ë¥  í‘œì‹œ (ì˜ˆ: "Tasks: 2/2 ì™„ë£Œ")
   - Plan ì„ íƒ ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€

   **ìˆ˜ì •ëœ íŒŒì¼:**
   - `python/ai_helpers_new/flow_manager_unified.py`
     - `_handle_flow_command()` ë©”ì„œë“œ ìˆ˜ì •
     - `_generate_plan_list()` ë©”ì„œë“œ ì¶”ê°€

### 2. **Context Management ì‹œìŠ¤í…œ**
   - Flow ì‘ì—… ê³¼ì • ìë™ ì¶”ì  ë° ê¸°ë¡
   - `.ai-brain/contexts/` ë””ë ‰í† ë¦¬ì— Context ì €ì¥

   **Context ê¸°ë¡ í•¨ìˆ˜ë“¤:**
   ```python
   from ai_helpers_new.flow_context_wrapper import (
       record_flow_action,
       record_task_action,
       record_plan_action,
       record_doc_creation
   )
   ```

   **Contextì™€ FlowManagerUnified ì—°ê²° (ì–´ëŒ‘í„° íŒ¨í„´):**
   ```python
   from ai_helpers_new.context_integration import ContextIntegration
   from ai_helpers_new.flow_manager_unified import FlowManagerUnified

   # Context Adapter ìƒì„±
   class ContextManagerAdapter:
       def __init__(self, context_integration):
           self.context = context_integration

       def add_event(self, event_type, data):
           flow_id = data.get('flow_id', 'unknown')
           self.context.record_flow_action(flow_id, event_type, data)

   # ì—°ê²°
   context_integration = ContextIntegration()
   context_adapter = ContextManagerAdapter(context_integration)
   fmu = FlowManagerUnified(context_manager=context_adapter)
   ```

### 3. **Context íŒŒì¼ êµ¬ì¡°**
   ```
   .ai-brain/contexts/
   â”œâ”€â”€ docs_context.json          # ë¬¸ì„œ ê´€ë ¨ Context
   â””â”€â”€ flow_[flow_id]/           # Flowë³„ Context
       â””â”€â”€ context.json          # Flow ì‘ì—… ê¸°ë¡
   ```

## ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### /flow ëª…ë ¹ì–´ v30.0 ë™ì‘ ë°©ì‹
1. Flow ì „í™˜ ì„±ê³µ ì‹œ ìë™ìœ¼ë¡œ Plan ëª©ë¡ ìƒì„±
2. ê° Planì˜ ì™„ë£Œ ìƒíƒœì™€ Task ì§„í–‰ë¥  ê³„ì‚°
3. ì‚¬ìš©ì ì¹œí™”ì ì¸ í˜•íƒœë¡œ í‘œì‹œ
4. Plan ì„ íƒ ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€

### Context ê¸°ë¡ ë‚´ìš©
- **íƒ€ì„ìŠ¤íƒ¬í”„**: ëª¨ë“  ì‘ì—…ì˜ ì •í™•í•œ ì‹œê°„
- **ì‘ì—… ìœ í˜•**: flow_created, task_started, task_completed ë“±
- **ìƒì„¸ ì •ë³´**: ì‘ì—…ë³„ ì„¸ë¶€ ë‚´ìš©, ì§„í–‰ë¥ , ê²°ê³¼, ì¸ì‚¬ì´íŠ¸

### Context í™œìš© ì˜ˆì‹œ
```python
# 1. Flow ì‘ì—… ê¸°ë¡
record_flow_action(flow_id, "flow_analysis", {
    "action": "ë¶„ì„ ì‹œì‘",
    "timestamp": datetime.now().isoformat(),
    "purpose": "í”„ë¡œì íŠ¸ ë¶„ì„"
})

# 2. Task ì§„í–‰ ìƒí™© ê¸°ë¡
record_task_action(flow_id, task_id, "progress_update", {
    "progress": 50,
    "message": "ì¤‘ê°„ ë‹¨ê³„ ì™„ë£Œ",
    "next_step": "ë‹¤ìŒ ì‘ì—…"
})

# 3. Context ìš”ì•½ ê°€ì ¸ì˜¤ê¸°
from ai_helpers_new.context_integration import ContextIntegration
context = ContextIntegration()
summary = context.get_context_summary()
```

## âš ï¸ ì•Œë ¤ì§„ ì´ìŠˆ ë° í•´ê²° ë°©ë²•

### 1. Plan ìƒì„± ì˜¤ë¥˜
- **ë¬¸ì œ**: `/plan add` ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œ 'FlowService' object has no attribute 'add_plan_to_flow' ì˜¤ë¥˜
- **ì›ì¸**: PlanServiceì™€ FlowService ê°„ ë©”ì„œë“œ ë¶ˆì¼ì¹˜
- **ì„ì‹œ í•´ê²°**: ì§ì ‘ create_plan() ë©”ì„œë“œ ì‚¬ìš©

### 2. Context Manager ì—°ê²°
- **ë¬¸ì œ**: FlowManagerUnifiedê°€ ê¸°ëŒ€í•˜ëŠ” add_event() ë©”ì„œë“œê°€ ContextIntegrationì— ì—†ìŒ
- **í•´ê²°**: ContextManagerAdapter í´ë˜ìŠ¤ë¡œ ì¸í„°í˜ì´ìŠ¤ ë³€í™˜

### 3. flows.json ë°ì´í„° êµ¬ì¡°
- **ë¬¸ì œ**: plansì™€ tasksê°€ listë¡œ ì €ì¥ë˜ì–´ ìˆìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒ
- **í•´ê²°**: dict í˜•íƒœë¡œ ë³€í™˜ í•„ìš”
