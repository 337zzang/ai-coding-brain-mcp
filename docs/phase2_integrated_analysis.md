# Phase 2 - INTEGRATED 분석

## O3 분석 결과

Phase-2 통합 위험 분석 및 우선순위

────────────────────────
A. 세 작업의 상호 의존성과 권장 수행 순서
────────────────────────
1) Facade 도입 → 2) 디렉토리 구조 리팩토링 → 3) 네이밍 수정  
이 순서를 권장하는 이유  

• Facade(2)는 “외부 계약(Entry-Point)”을 먼저 고정해 준다.  
  └ 나머지 두 작업(파일 이동, 이름 변경)이 내부에서 얼마나 요동치든  
     외부 호출부(서비스, CLI, 스크립트, 배치 등)는 변하지 않는다.  
• 디렉토리 구조(1)는 파일/모듈 import 경로를 대거 수정한다.  
  └ Facade가 있으면 외부 모듈이 새 경로를 알 필요가 없다.  
• 네이밍(3)은 가장 광범위한 텍스트 치환을 요구한다.  
  └ 구조가 확정된 뒤에 일괄 또는 점진적으로 적용하는 편이 충돌이 적다.

의존 관계 요약
 Facade   ←(간접)― 구조 개편, 네이밍  
 구조 개편 ←(느슨)― 네이밍  
 네이밍   ― 독립적 (단, 선행 작업 결과에 강하게 영향)

────────────────────────
B. 동시 진행 vs. 순차 진행 위험도
────────────────────────
동시 진행
• 위험: import-path 충돌, PR 머지 충돌, 테스트 격리 실패  
• 버그 유입 확률 ↑ : 동일 코드 라인을 여러 팀원이 동시 수정  
• 팀 생산성 ↓ : 코드 리뷰 복잡, 롤백 시 범위 불명확

순차 진행(제안)
• 위험을 국소화: 한 번에 한 축만 변한다.  
• 롤백 단순: 이전 단계 태그만 되돌리면 됨.  
• 일정은 늘어나지만, 재작업·디버깅 시간까지 포함하면 오히려 총 공수가 비슷하거나 적다.

────────────────────────
C. “세 작업 중 하나만” 고르면?
────────────────────────
가치/위험/비용을 종합할 때 Facade 패턴 도입(2)을 단독 선택
• 사용자 불편↓ : API 일관화로 호출 실수·옵션 누락 감소  
• 버그 위험↓ : 외부 접근점이 줄어 방어 코드(Validation) 추가 용이  
• 유지보수↓ : 내부 모듈 교체/리팩터링 시 외부 계약 불변  
• 생산성↑ : 새 기능은 Facade에만 추가하면 되므로 학습 곡선 완만

────────────────────────
D. 아무 것도 하지 않는 편이 나은가?
────────────────────────
“If it ain’t broke, don’t fix it” 점검
• 현재 시스템: 운영 중이지만 이미 Phase-1에서 ‘누락 함수’가 있었음 → 기술부채 확인  
• 55파일/223개 함수에 테스트 13개 → 커버리지 ≤ 25% 추정  
• 구조적 개선 없이 기능 추가가 계속되면 복잡도는 정(正)비례 아닌 기하급수적으로 증가  
결론: “완전한 무변화”는 단기 위험 회피엔 유리하나 6~12개월 안에 유지보수 비용 과폭등 가능.  
단, 과도기적 테스트 보강 없이 대규모 코드 이동·이름 변경은 ‘고치려다 고장’ 위험이 더 큼.

────────────────────────
E. 최종 권장 우선순위
────────────────────────
0. 사전 단계(강력 추천)  
   – 테스트 커버리지 50% 이상 확보(현재 13개 테스트 확장)  
   – CI 파이프라인에 “100% 통과 시만 머지” 규칙 적용  

1. Facade 패턴 도입 (가치↑, 위험↓)  
   – 외부 진입점 공통 모듈 추가, 기존 호출부 순차적 마이그레이션  
   – Deprecation Warning → 최종 제거까지 최소 2 스프린트 유지  

2. 디렉토리 구조 리팩토링 (가치=중, 위험=중)  
   – Facade 기반 import 맵을 먼저 작성하여 외부 영향 차단  
   – isort/ruff 등 자동화 스크립트로 경로 수정  
   – 단일 PR·대규모 Merge 대신, 하위패키지 단위로 작게 나눠 머지  

3. 네이밍 컨벤션 15% 수정 (가치↓, 위험↑)  
   – 규모를 더 세분화: 파일별 rename → PR 당 200줄 이하 원칙  
   – 린터(rename-aware)와 타입체커(MyPy/Pyright)로 미사용 식별  
   – 코틀린 식의 @Deprecated 어노테이션 또는 중첩 alias로 완충

4. 하지 말 것  
   – 세 작업을 ‘한 PR’에 몰아넣는 방식  
   – 테스트 추가 없이 파일 이동/이름 변경

────────────────────────
요약
• 최대 가치는 Facade (#2).  
• 전체 작업은 “Facade → 구조 → 네이밍” 순차 실행이 가장 안전.  
• 동시 진행은 충돌·버그 리스크가 크므로 피한다.  
• 아무 것도 안 하면 단기 평온, 장기 비용 폭증. 다만 테스트 없이 과격한 리팩토링은 ‘고치다 망가뜨리기’로 귀결되므로, “테스트 보강 → Facade”가 사실상 미니멈 실행선이다.

## 메타 정보
- Reasoning Effort: high
- 분석 일시: 2025-08-09 16:44:00
