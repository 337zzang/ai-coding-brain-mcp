/**
 * AI Coding Brain MCP - Tool Definitions v8.0
 * í•µì‹¬ ì›Œí¬í”Œë¡œìš° ìœ ì§€, ì¤‘ë³µë§Œ ì œê±°
 * 
 * ì‘ì„±ì¼: 2025-06-16
 */

// ë„êµ¬ ì •ì˜ íƒ€ì…
interface ToolDefinition {
    name: string;
    description: string;
    inputSchema: {
        type: string;
        properties: Record<string, any>;
        required?: string[];
    };
}

export const toolDefinitions: ToolDefinition[] = [
    {
        name: 'execute_code',
        description: `ğŸ§  AI Coding Brain - JSON REPL Session í™˜ê²½

## ìë™ ë¡œë“œ ê°ì²´
- **helpers** - ëª¨ë“  í—¬í¼ í•¨ìˆ˜ (24ê°œ)
- **context** - í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸
- **ê¸°ë³¸ ëª¨ë“ˆë“¤** - os, sys, np, pd ë“±

## í•µì‹¬ ëª…ë ¹ì–´
- helpers.cmd_flow("í”„ë¡œì íŠ¸") - í”„ë¡œì íŠ¸ ì „í™˜
- helpers.cmd_plan() - ì‘ì—… ê³„íš ìˆ˜ë¦½
- helpers.cmd_task() - ì‘ì—… ì¶”ê°€
- helpers.cmd_next() - ë‹¤ìŒ ì‘ì—… ì§„í–‰

ğŸ“š ì „ì²´ í•¨ìˆ˜ ëª©ë¡ì€ UserPreferences ì°¸ì¡°

## ğŸ”§ ì‘ì—… ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°

### ê³„íš ìˆ˜ë¦½ (/plan)
1. ê³„íš ë¶„ì„ ë° ë¸Œë¦¬í•‘ ì œì‹œ
2. ì‚¬ìš©ì ìŠ¹ì¸ ëŒ€ê¸°
3. helpers.cmd_plan() ì‹¤í–‰
4. Phaseë³„ ì‘ì—… ì¶”ê°€

### ì‘ì—… ì§„í–‰ (/next)
1. í˜„ì¬ ì‘ì—… ì™„ë£Œ ì²˜ë¦¬
2. helpers.cmd_next() ì‹¤í–‰
3. ë‹¤ìŒ ì‘ì—… ë¸Œë¦¬í•‘

## ğŸ“Š ì‘ì—… ì‹¤í–‰ í…œí”Œë¦¿

### ì‘ì—… ì‹œì‘ ì „ ë¸Œë¦¬í•‘
\`\`\`
ğŸ¯ ì‘ì—…: [ì‘ì—… ID] [ì‘ì—…ëª…]
======================================

ğŸ“Œ ì‘ì—… ëª©í‘œ:
[êµ¬ì²´ì ì¸ ëª©í‘œ ì„¤ëª…]

ğŸ“ ìˆ˜ì • ì˜ˆì • íŒŒì¼:
- [íŒŒì¼1] : [ë³€ê²½ ë‚´ìš©]

ğŸ”§ ì£¼ìš” ë³€ê²½ì‚¬í•­:
1. [ë³€ê²½ì‚¬í•­ 1]
   - ìœ„ì¹˜: [íŒŒì¼ëª…] > [í•¨ìˆ˜ëª…]
   - ë‚´ìš©: [êµ¬ì²´ì  ë³€ê²½]

â±ï¸ ì˜ˆìƒ ì†Œìš” ì‹œê°„: [Xë¶„]

ì´ëŒ€ë¡œ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (Y/N)
\`\`\`

### ë‹¨ê³„ë³„ ì‹¤í–‰
\`\`\`python
# 1ë‹¨ê³„: ë°±ì—…
print("ğŸ” ë°±ì—… ìƒì„± ì¤‘...")
backup = helpers.backup_file(file, f"ì‘ì—…_{task_id}_ì „")

# 2ë‹¨ê³„: ìˆ˜ì •
print(f"ğŸ”§ ìˆ˜ì • ì‘ì—… ì§„í–‰ ({step}/{total})")
helpers.replace_block(file, block, new_code)

# 3ë‹¨ê³„: ê²€ì¦
print("ğŸ” ìˆ˜ì • ê²°ê³¼ ê²€ì¦ ì¤‘...")
result = helpers.parse_with_snippets(file)
\`\`\`

### ê²°ê³¼ ë³´ê³ 
\`\`\`
âœ… ì‘ì—… ì™„ë£Œ: [ì‘ì—…ëª…]
======================================

ğŸ“Š ìˆ˜ì • ìš”ì•½:
- ìˆ˜ì •ëœ íŒŒì¼: Xê°œ
- ë³€ê²½ëœ í•¨ìˆ˜: Yê°œ

ğŸ“ ìƒì„¸ ë³€ê²½ ë‚´ì—­:
[íŒŒì¼ë³„ ìƒì„¸ ë‚´ì—­]

ë‹¤ìŒ ì‘ì—…ìœ¼ë¡œ ì§„í–‰: /next
\`\`\`

## ğŸš¨ ì˜¤ë¥˜ ì²˜ë¦¬
\`\`\`
âŒ ì˜¤ë¥˜ ë°œìƒ!
======================================

ğŸ“ ì˜¤ë¥˜ ìœ„ì¹˜:
- íŒŒì¼: [ê²½ë¡œ]
- í•¨ìˆ˜: [í•¨ìˆ˜ëª…]
- ë¼ì¸: [ë²ˆí˜¸]

ğŸ” ì˜¤ë¥˜ ì •ë³´:
- íƒ€ì…: [ì—ëŸ¬ íƒ€ì…]
- ë©”ì‹œì§€: [ì—ëŸ¬ ë©”ì‹œì§€]

ğŸ’¡ í•´ê²° ë°©ì•ˆ:
[êµ¬ì²´ì ì¸ í•´ê²° ë°©ë²•]
\`\`\``,
        inputSchema: {
            type: 'object',
            properties: {
                code: {
                    type: 'string',
                    description: 'Python ì½”ë“œ. helpers ê°ì²´ë¥¼ í†µí•´ ëª¨ë“  ì‘ì—… ìˆ˜í–‰.'
                },
                language: {
                    type: 'string',
                    enum: ['python', 'javascript', 'typescript'],
                    description: 'ì–¸ì–´ (ê¸°ë³¸ê°’: python)',
                    default: 'python'
                }
            },
            required: ['code']
        }
    },

    {
        name: 'restart_json_repl',
        description: `JSON REPL ì„¸ì…˜ ì¬ì‹œì‘

ìš©ë„: ë©”ëª¨ë¦¬ ì •ë¦¬, ë³€ìˆ˜ ì´ˆê¸°í™”
ê¸°ë³¸ê°’: helpers ìœ ì§€í•˜ë©° ì¬ì‹œì‘

\`\`\`python
restart_json_repl()  # helpers ìœ ì§€
restart_json_repl(keep_helpers=False)  # ì™„ì „ ì´ˆê¸°í™”
\`\`\``,
        inputSchema: {
            type: 'object',
            properties: {
                reason: {
                    type: 'string',
                    description: 'ì¬ì‹œì‘ ì´ìœ ',
                    default: 'ì„¸ì…˜ ìƒˆë¡œê³ ì¹¨'
                },
                keep_helpers: {
                    type: 'boolean',
                    description: 'helpers ê°ì²´ ìœ ì§€ ì—¬ë¶€',
                    default: true
                }
            },
            required: []
        }
    },

    {
        name: 'backup_file',
        description: `íŒŒì¼ ë°±ì—… ìƒì„±

ì‚¬ìš©: helpers.backup_file(filepath, reason)
ë°˜í™˜: ë°±ì—… íŒŒì¼ ê²½ë¡œ

ë°±ì—… êµ¬ì¡°:
\`\`\`
backups/
â””â”€â”€ 2025-06-16/
    â””â”€â”€ file.py.ì‘ì—…ëª….ì‹œê°„.bak
\`\`\``,
        inputSchema: {
            type: 'object',
            properties: {
                filepath: {
                    type: 'string',
                    description: 'ë°±ì—…í•  íŒŒì¼ ê²½ë¡œ'
                },
                reason: {
                    type: 'string',
                    description: 'ë°±ì—… ì´ìœ  (íŒŒì¼ëª…ì— í¬í•¨)',
                    default: 'backup'
                }
            },
            required: ['filepath']
        }
    },

    {
        name: 'restore_backup',
        description: `ë°±ì—… ë³µì›

ì‚¬ìš©: helpers.restore_backup(backup_path, target_path?)

ë³µì› í”„ë¡œì„¸ìŠ¤:
1. ë°±ì—… íŒŒì¼ í™•ì¸
2. ì›ë³¸ ê²½ë¡œ ìë™ ì¶”ì¶œ
3. ê¸°ì¡´ íŒŒì¼ ë°±ì—…
4. ë³µì› ì‹¤í–‰`,
        inputSchema: {
            type: 'object',
            properties: {
                backup_path: {
                    type: 'string',
                    description: 'ë³µì›í•  ë°±ì—… íŒŒì¼ ê²½ë¡œ'
                },
                targetPath: {
                    type: 'string',
                    description: 'ë³µì› ëŒ€ìƒ ê²½ë¡œ (ì„ íƒì‚¬í•­)'
                }
            },
            required: ['backup_path']
        }
    },

    {
        name: 'list_backups',
        description: `ë°±ì—… ëª©ë¡ ì¡°íšŒ

ì‚¬ìš©: list_backups(filename?)
ë°˜í™˜: {backups: [...], total: N}`,
        inputSchema: {
            type: 'object',
            properties: {
                filename: {
                    type: 'string',
                    description: 'í•„í„°ë§í•  íŒŒì¼ëª… (ì„ íƒì‚¬í•­)'
                }
            },
            required: []
        }
    },

    // ========== í”„ë¡œì íŠ¸ ì›Œí¬í”Œë¡œìš° ë„êµ¬ ==========
    {
        name: 'flow_project',
        description: `í”„ë¡œì íŠ¸ ì „í™˜ ë„êµ¬

í”„ë¡œì íŠ¸ë¥¼ ì „í™˜í•˜ê³  ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
ë‚´ë¶€ì ìœ¼ë¡œ helpers.cmd_flow()ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

ì‚¬ìš© ì˜ˆ:
- flow_project("my-project")
- flow_project("ai-coding-brain-mcp")`,
        inputSchema: {
            type: 'object',
            properties: {
                project_name: {
                    type: 'string',
                    description: 'ì „í™˜í•  í”„ë¡œì íŠ¸ ì´ë¦„'
                }
            },
            required: ['project_name']
        }
    },

    {
        name: 'plan_project',
        description: `í”„ë¡œì íŠ¸ ê³„íš ìˆ˜ë¦½

ìƒˆë¡œìš´ ì‘ì—… ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.
ë‚´ë¶€ì ìœ¼ë¡œ helpers.cmd_plan()ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

ì›Œí¬í”Œë¡œìš°:
1. ê³„íš ë¶„ì„ ë° ë¸Œë¦¬í•‘ ì œì‹œ
2. ì‚¬ìš©ì ìŠ¹ì¸ ëŒ€ê¸°  
3. Phaseë³„ ì‘ì—… ìë™ ìƒì„±`,
        inputSchema: {
            type: 'object',
            properties: {
                plan_name: {
                    type: 'string',
                    description: 'ê³„íš ì´ë¦„ (ì„ íƒì‚¬í•­)'
                },
                description: {
                    type: 'string',
                    description: 'ê³„íš ì„¤ëª… (ì„ íƒì‚¬í•­)'
                }
            },
            required: []
        }
    },

    {
        name: 'task_manage',
        description: `ì‘ì—… ê´€ë¦¬

ì‘ì—…ì„ ì¶”ê°€, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œí•©ë‹ˆë‹¤.
ë‚´ë¶€ì ìœ¼ë¡œ helpers.cmd_task()ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

ì‚¬ìš© ì˜ˆ:
- task_manage("add", "ìƒˆë¡œìš´ ê¸°ëŠ¥ êµ¬í˜„")
- task_manage("list")
- task_manage("done", 1)`,
        inputSchema: {
            type: 'object',
            properties: {
                action: {
                    type: 'string',
                    description: 'ì‘ì—… ì•¡ì…˜ (add, list, done, remove)',
                    enum: ['add', 'list', 'done', 'remove']
                },
                args: {
                    type: 'array',
                    description: 'ì•¡ì…˜ì— ë”°ë¥¸ ì¸ìë“¤',
                    items: {
                        type: 'string'
                    }
                }
            },
            required: ['action']
        }
    },

    {
        name: 'next_task',
        description: `ë‹¤ìŒ ì‘ì—… ì§„í–‰

í˜„ì¬ ì‘ì—…ì„ ì™„ë£Œ ì²˜ë¦¬í•˜ê³  ë‹¤ìŒ ì‘ì—…ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
ë‚´ë¶€ì ìœ¼ë¡œ helpers.cmd_next()ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

ì›Œí¬í”Œë¡œìš°:
1. í˜„ì¬ ì‘ì—… ì™„ë£Œ ì²˜ë¦¬
2. ë‹¤ìŒ ì‘ì—… ë¡œë“œ
3. ì‘ì—… ë¸Œë¦¬í•‘ ì œì‹œ`,
        inputSchema: {
            type: 'object',
            properties: {},
            required: []
        }
    },

    {
    }
];